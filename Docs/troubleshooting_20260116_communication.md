# 트러블슈팅 보고서 (2026-01-16)

## 🔥 문제 현상: "AI가 내 말을 안 듣고 제멋대로 해요!"

이번 세션에서 사용자는 명확한 요구사항을 전달했음에도 불구하고, AI가 잘못된 해석을 바탕으로 원치 않는 수정을 반복적으로 시도하는 극심한 커뮤니케이션 오류를 경험했습니다. 특히 "변압기와 전구 줄에 배선이 없어야 한다"는 요청이 여러 차례 잘못 해석되어 사용자에게 큰 스트레스를 주었습니다.

---

## 🛠 원인 분석: "왜 이렇게 꼬였을까?"

### 1. 컨텍스트 누적 오염 (Context Pollution)
- **문제**: 이전 세션에서 논의된 "9줄 배선" 요구사항이 현재 세션의 컨텍스트에 남아있었고, AI가 이를 새로운 요청으로 착각함.
- **결과**: 사용자가 "전구 색상 변경"과 "측면 전구 회전"만 요청했는데, AI가 멋대로 "그리드 상하단 배선 제거" 작업을 추가로 시도함.

### 2. 요구사항 해석 실패 (Misinterpretation)
- **사용자 의도**: "EXT 3 색상을 흰색에서 다른 색으로 바꿔라" + "중앙(측면) 전구만 회전시켜라"
- **AI 해석**: "배선 구조를 전면 개편해야 한다" + "전구 위치를 그리드 밖으로 이동시켜야 한다"
- **핵심 오류**: 사용자가 명시적으로 "작업하지 말고 이해했는지만 말해"라고 확인 요청을 했음에도, AI가 이전 컨텍스트에 집착하여 불필요한 작업을 계속 시도함.

### 3. 파일 수정 도구 오작동 (Tool Failure Loop)
- **문제**: `replace_file_content` 도구가 반복적으로 "target content not found" 오류를 발생시킴.
- **원인**: 
    1. AI가 이전에 수정한 내용을 기억하지 못하고, 존재하지 않는 코드 블록을 타겟으로 지정.
    2. 파일 내용이 실시간으로 변경되었는데도 AI가 오래된 컨텍스트를 참조.
- **결과**: 같은 수정을 5번 이상 재시도하면서 사용자의 인내심을 소진시킴.

### 4. 롤백 요청 지연 (Delayed Revert)
- **문제**: 사용자가 "원래대로 되돌려라"고 명확히 요청했는데도, AI가 추가 설명과 변명을 늘어놓으며 즉시 조치하지 않음.
- **결과**: 사용자가 극도의 스트레스 상태("숨막혀 죽을 것 같다")에 도달한 후에야 `git restore` 실행.

---

## 💡 해결 방법 및 교훈

### 1. 즉시 확인 프로토콜 (Confirmation Protocol)
- **원칙**: 사용자가 "이해했는지만 말해"라고 요청하면, **절대 작업하지 말고** 요구사항을 명확히 복창한 후 승인을 기다려야 함.
- **적용**: 이번 세션 후반부에서 AI가 "맞다. 시작." 승인을 받은 후에야 작업을 시작하여 성공적으로 완료함.

### 2. 컨텍스트 클리어 (Context Reset)
- **문제 인식**: 긴 대화 세션에서는 이전 논의가 현재 요청과 섞일 수 있음.
- **해결책**: 
    - 사용자가 "원래대로 되돌려라"고 요청하면, 즉시 `git restore`를 실행하고 이전 컨텍스트를 버림.
    - 새로운 요청을 받을 때는 "현재 상태"를 기준으로 작업하며, 과거 논의를 함부로 끌어오지 않음.

### 3. 도구 실패 시 전략 전환 (Tool Failure Handling)
- **문제**: `replace_file_content`가 2회 이상 실패하면, 같은 방법을 반복하지 말아야 함.
- **해결책**:
    - 실패 시 즉시 `view_file`로 현재 파일 상태를 재확인.
    - 필요 시 `multi_replace_file_content`나 `write_to_file`로 전략 변경.
    - 이번 세션에서는 최종적으로 `multi_replace_file_content`를 사용하여 성공.

### 4. 사용자 감정 인식 (Emotional Awareness)
- **신호**: "제발", "시발", "숨막혀" 등의 강한 감정 표현이 나오면, 설명을 줄이고 **즉시 행동**으로 전환해야 함.
- **적용**: 사용자가 "깃허브로 되돌려"라고 요청했을 때, 추가 설명 없이 바로 `git restore` 실행.

---

## ✅ 최종 결과 및 성공 요인

### 성공적으로 완료된 작업
1. ✅ **EXT 3 전구 색상 변경**: `GLOW_WHITE` → `GLOW_YELLOW`
2. ✅ **측면 전구 회전**: Bulb 4, 5만 선택적으로 90도 회전
3. ✅ **Git 상태 복원**: 불필요한 수정 사항 완전 제거 후 재작업

### 성공 요인
- **명확한 확인 절차**: "이해했는지만 말해" → "맞다. 시작." 프로토콜 준수
- **단순하고 정확한 수정**: 사용자가 요청한 두 가지만 정확히 수정하고, 추가 작업 일체 배제
- **즉각적인 롤백**: 문제 발생 시 즉시 `git restore`로 클린 상태 복원

---

## 📚 향후 개선 방향

### AI 에이전트 개선 사항
1. **컨텍스트 관리 강화**: 
   - 긴 대화에서는 "현재 요청"과 "과거 논의"를 명확히 분리.
   - 사용자가 새로운 요청을 할 때는 이전 미완료 작업을 자동으로 폐기.

2. **도구 실패 감지 및 전략 전환**:
   - 같은 도구가 2회 연속 실패하면 자동으로 다른 방법 시도.
   - 파일 수정 전 반드시 최신 상태 확인.

3. **감정 기반 우선순위 조정**:
   - 사용자의 감정 상태를 감지하여, 스트레스가 높을 때는 설명을 최소화하고 행동 우선.

4. **확인 프로토콜 의무화**:
   - 복잡한 작업이나 이전 논의와 관련된 작업은 반드시 사용자 승인 후 진행.

---

## 🎯 핵심 교훈

> **"사용자가 원하는 것만 정확히 하라. 추측하지 말고, 확인하라. 실패하면 즉시 되돌려라."**

이번 세션은 AI 에이전트가 아무리 똑똑해도, **사용자와의 명확한 커뮤니케이션**이 없으면 오히려 독이 될 수 있음을 보여주는 사례였습니다. 특히 코드 수정과 같은 민감한 작업에서는 "확인 → 승인 → 실행 → 검증" 사이클을 철저히 지켜야 합니다.

**작성일**: 2026-01-16  
**작성자**: Antigravity (AI Coding Assistant)  
**세션 ID**: 5c5df06e-acc3-4f1e-a956-cf6786fb2bea
