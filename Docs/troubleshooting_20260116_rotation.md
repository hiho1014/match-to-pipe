# 트러블슈팅 보고서 (2026-01-16)

## 🔍 문제 현상: "파이프를 돌렸는데 왜 방향이 제멋대로죠?"

사용자가 파이프를 클릭해서 회전시킬 때, 눈으로 보이는 파이프의 방향과 실제 전기가 흐르는 논리적 방향이 일치하지 않는 현상이 발생했습니다. 특히 여러 번 클릭할수록 파이프가 엉뚱한 곳을 가리키는 '설명하기 어려운 이상함'이 핵심이었습니다.

---

## 🛠 원인 분석: "몸은 돌았는데, 마음은 제자리에?"

컴퓨터가 퍼즐을 처리할 때 두 가지 정보를 동시에 다룹니다.
1.  **데이터 (마음)**: "이 파이프는 위와 오른쪽이 뚫려있다"라는 정보.
2.  **비주얼 (몸)**: "화면에서 이 파이프를 90도 돌려서 보여줘"라는 명령.

### 진짜 문제는 여기서 발생했습니다 (이중 회전 현상)
- **기존 방식**: 
    1. 클릭하면 데이터를 90도 회전 시킵니다.
    2. 동시에 화면상의 파이프 이미지도 90도 회전 애니메이션을 줍니다.
    3. 애니메이션이 끝나면 "전기가 잘 통하나?" 체크하기 위해 파이프를 **새로 그립니다.**
    4. **오류 발생**: 새로 그릴 때 이미 90도 돌아간 이미지 위에, 90도 회전된 데이터를 다시 입히니까 결과적으로 **180도**가 돌아가버리는 현상이 생겼던 것입니다!

---

## 💡 해결 방법: "회전이 끝나면 0점에서 다시 시작하기"

이 문제를 해결하기 위해 **'애니메이션은 보여주기용일 뿐, 결과는 항상 정자세에서 그린다'**는 원칙을 적용했습니다.

### 1. 애니메이션 후 리셋
파이프가 빙글 도는 애니메이션이 끝나면, 내부적으로 파이프의 각도를 즉시 **0도(정자세)**로 되돌립니다. 그 직후에 바뀐 데이터(이미 90도 돌아간 정보)를 바탕으로 파이프를 새로 그리게 했습니다. 
- 결과: 사용자는 부드럽게 도는 것만 보고, 실제 배선은 꼬임 없이 정확한 위치에 그려집니다.

### 2. 초기 섞기 로직 수정
게임 시작 시 파이프를 랜덤하게 섞을 때도 이미지를 돌리는 게 아니라, **데이터를 먼저 섞고 나서 그림을 딱 한 번만 그리도록** 순서를 바로잡았습니다.

---

## ✅ 요약 및 교훈
- **원리**: 겉모습(각도)과 속마음(데이터)이 중복으로 더해지지 않도록, 한 동작이 끝나면 겉모습을 초기화하고 속마음에 맞춰 다시 그리는 **'동기화(Sync)'** 과정이 핵심이었습니다.
- **결과**: 이제 아무리 많이 클릭해도 파이프 방향이 로직과 어긋나지 않고 정확하게 동작합니다.
